"""
Quick file to generate benchmark figures. Note that these benchmark figures can be natively generated by PlanetProfile by enabling
Params.PLOT_PVT_HYDRO and Params.PLOT_HYDRO_PHASE. I make this separate file just to speed up the process by not requiring a Planet profile to ahve to be generated each time.
"""
import os
import sys
import numpy as np

# Add the project root to sys.path
project_root = os.path.abspath(os.path.join(os.path.dirname(__file__), "../../../../.."))
if project_root not in sys.path:
    sys.path.insert(0, project_root)
os.chdir(project_root) # Change directory to the project root
from PlanetProfile.GetConfig import Params as configParams, FigMisc
Params = configParams
os.chdir(os.path.dirname(os.path.abspath(__file__))) # Reset directory back to this directory

# We have to import PlanetProfile dependencies here in order to prevent __init__.py of /PlanetProfile directory running before we load configs
from PlanetProfile.Utilities.defineStructs import PlanetStruct
from PlanetProfile.Plotting.PTPlots import PlotPvThydro

# Set default figure parameters
FigMisc.PminHydro_MPa = 0.1
FigMisc.PmaxHydro_MPa = 200
FigMisc.TminHydro_K = 240
FigMisc.TmaxHydro_K = 350
FigMisc.SHOW_GEOTHERM = False
FigMisc.dpi = 600
FigMisc.propsToPlot = ['rho', 'Cp', 'alpha', 'VP', 'KS', 'sig']
Params.FigureFiles.xtn = '.png'
Params.TITLES = True


def benchmark_compositions(comp_str1, comp_str2, save_label1, save_label2, comp_str_1, comp_str_2, wOcean_ppt=None, 
                          plot_individual=False):
    """
    Benchmark two compositions using PlotPvThydro.
    
    Parameters:
    -----------
    comp_str1, comp_str2 : str
        Ocean composition strings for the two compositions to compare
    save_label1, save_label2 : str
        Save labels for the two compositions
    comp_str_1, comp_str_2 : str
        Composition strings specifically for the compStr attributes
    wOcean_ppt : float, optional
        Ocean salinity in parts per thousand. If None, defaults are used.
    plot_individual : bool, optional
        Whether to plot individual compositions before comparison (default: False)
    
    Returns:
    --------
    tuple
        (planet1, planet2) - The two PlanetStruct objects created
    """
    
    # Create planet structures
    planet1 = PlanetStruct('Test')
    planet1.Ocean.comp = comp_str1
    planet1.saveLabel = save_label1
    planet1.compStr = comp_str_1
    
    planet2 = PlanetStruct('Test')
    planet2.Ocean.comp = comp_str2
    planet2.saveLabel = save_label2
    planet2.compStr = comp_str_2
    
    # Set ocean salinity if provided
    if wOcean_ppt is not None:
        planet1.Ocean.wOcean_ppt = wOcean_ppt
        planet2.Ocean.wOcean_ppt = wOcean_ppt
    
    # Plot individual compositions if requested
    if plot_individual:
        PlotPvThydro([planet1], Params)
        PlotPvThydro([planet2], Params)
    
    # Plot comparison
    planet_list = np.array([planet1, planet2])
    PlotPvThydro(planet_list, Params)
    
    return planet1, planet2


# ============================================================================
# BENCHMARK COMPARISONS
# ============================================================================

print("Generating Pure H2O comparison...")
benchmark_compositions(
    comp_str1="CustomSolutionPureH2O = H+: 1e-7, OH-: 1e-7",
    comp_str2='PureH2O',
    save_label1='PureH2O_Reaktoro',
    save_label2='PureH2O_Seafreeze',
    comp_str_1="CustomSolutionPureH2O = H+: 1e-7, OH-: 1e-7",
    comp_str_2='PureH2O',
    wOcean_ppt=None
)

print("Generating 3.5ppt Seawater comparison...")
benchmark_compositions(
    comp_str1="CustomSolution3.5pptSeawater = Cl-: 0.5657647, Na+: 0.4860597, Mg+2: 0.0547421, Ca+2: 0.0106568, K+: 0.0105797, SO4-2: 0.0292643",
    comp_str2='Seawater',
    save_label1='CustomSolution_3.5ppt_Seawater',
    save_label2='GSW_3.5ppt_Seawater',
    comp_str_1="CustomSolutionSeawater",
    comp_str_2='GSW Seawater at 3.5ppt',
    wOcean_ppt=3.5
)

print("Generating 35.1ppt Seawater comparison...")
benchmark_compositions(
    comp_str1="CustomSolution35.1pptSeawater = Cl-: 0.5657647, Na+: 0.4860597, Mg+2: 0.0547421, Ca+2: 0.0106568, K+: 0.0105797, SO4-2: 0.0292643",
    comp_str2='Seawater',
    save_label1='CustomSolution_35.1ppt_Seawater',
    save_label2='GSW_35.1ppt_Seawater',
    comp_str_1="CustomSolutionSeawater",
    comp_str_2='GSW Seawater at 35.1ppt',
    wOcean_ppt=35.1
)

print("Generating 10ppt MgSO4 comparison...")
benchmark_compositions(
    comp_str1="CustomSolution10pptMgSO4 = Mg+2: 1, SO4-2: 1",
    comp_str2='MgSO4',
    save_label1='CustomSolution_10ppt_MgSO4',
    save_label2='Vance_10ppt_MgSO4',
    comp_str_1="CustomSolutionMgSO4",
    comp_str_2='Vance(2018) MgSO4 at 10ppt',
    wOcean_ppt=10
)

print("Generating 100ppt MgSO4 comparison...")
benchmark_compositions(
    comp_str1="CustomSolution100pptMgSO4 = Mg+2: 1, SO4-2: 1",
    comp_str2='MgSO4',
    save_label1='CustomSolution_100ppt_MgSO4',
    save_label2='Vance_100ppt_MgSO4',
    comp_str_1="CustomSolutionMgSO4",
    comp_str_2='Vance(2018) MgSO4 at 100ppt',
    wOcean_ppt=100
)

print("Benchmark generation complete!")
